<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <title>Welcome to our VIP page</title>

  <!-- update the version number as needed
  <script defer src="/__/firebase/7.13.1/firebase-app.js"></script>
  <!-- include only the Firebase features as you need
  <script defer src="/__/firebase/7.13.1/firebase-auth.js"></script>
  <script defer src="/__/firebase/7.13.1/firebase-database.js"></script>
  <script defer src="/__/firebase/7.13.1/firebase-messaging.js"></script>
  <script defer src="/__/firebase/7.13.1/firebase-storage.js"></script>
  <!-- initialize the SDK after all desired features are loaded
  <script defer src="/__/firebase/init.js"></script>
  -->

  <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-auth.js"></script>

</head>

<body>

  <div id="message">
    <h2>Welcome, this is a test for our VIP survey</h2>
    <div class="login">
      <div class="login-triangle"></div>

      <h2 class="register-header">Register</h2>

      <form class="register-container" id="registerForm">
        <p><input id="registerEmail" type="email" placeholder="Email"></p>
        <p><input id="registerPassword" type="password" placeholder="Password"></p>
        <p><input type="submit" value="Register"></p>
      </form>

      <h2 class="login-header">Log in</h2>

      <form class="login-container" id="loginForm">
        <p><input id="loginEmail" type="email" placeholder="Email"></p>
        <p><input id="loginPassword" type="password" placeholder="Password"></p>
        <p><input type="submit" value="Log in"></p>
      </form>

      <button id="logoutbtn">Log Out</button>
    </div>

    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyCUJPYA_DJzM1CKBXlCGWoIy2RPW338GSo",
        authDomain: "vipdbroles.firebaseapp.com",
        databaseURL: "https://vipdbroles.firebaseio.com",
        projectId: "vipdbroles",
        storageBucket: "vipdbroles.appspot.com",
        messagingSenderId: "494762739659",
        appId: "1:494762739659:web:0d08d3585dd10d51ac584e"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);

      $(document).ready(function () {
        $("#registerForm").on("submit", function (event) {
          event.preventDefault();

          var email = $("#registerEmail").val();
          var password = $("#registerPassword").val();

          console.log(email);
          console.log(password);
          firebase.auth().createUserWithEmailAndPassword(email, password)
            .then(function (user) {
              console.log(user);
            })
            .catch(function (err) {
              console.log(err);
            });
          //location.reload();
        });
      });

      $("#loginForm").on("submit", function (event) {
        event.preventDefault();

        var email = $("#loginEmail").val();
        var password = $("#loginPassword").val();

        firebase.auth().signInWithEmailAndPassword(email, password)
          .then(function (user) {
            console.log(user);
          })
          .catch(function (err) {
            console.log(err);
          });
        //location.reload();
      });

      $("#logoutbtn").on("click", function () {
        firebase.auth().signOut().then(function () {
          alert("Goodbye!");
          // Sign-out successful.
        }).catch(function (error) {
          // An error happened.
        });
      });

      firebase.auth().onAuthStateChanged(function (user) {
        if (user) {
          console.log(user);
          var email = user.email;
          alert("Welcome " + email);
          //document.getElementById('welcomeMsg').innerHTML = "Welcome " + email + "!";
        } else {
          // No user is signed in.
          console.log("No user");
          //document.getElementById('welcomeMsg').innerHTML = "Hello Guest! Log in to post and comment"
        }
      });


    </script>

</body>

</html>